"use strict";var woostifyFormData=function(e){for(var t=[],a=0,n=e.elements.length;a<n;a++){var o=e.elements[a];o.name&&!o.disabled&&"reset"!==o.type&&(t[t.length]={name:o.name,value:o.value})}return t};function woostifyAjaxSingleAddToCartButton(){var e=document.querySelectorAll(".single_add_to_cart_button");e.length&&e.forEach((function(e){var t=e.closest("form.cart"),a=t.classList.contains("variations_form"),n=t.querySelector('[name="add-to-cart"]'),o=!!n&&n.value,r=t.querySelector(".qty"),i=t.querySelector(".additional-product"),c=!1,l={};if(a)var d=t.querySelector('[name="product_id"]'),u=t.querySelector('[name="variation_id"]'),s=t.querySelectorAll('select[name^="attribute"]');!o||t.classList.contains("grouped_form")||t.classList.contains("mnm_form")||e.addEventListener("click",(function(n){n.preventDefault();var _={};if(t.querySelector('[name="wcgwp_action"]')){var f=t.querySelector('[name="wcgwp_single_product"]:checked'),v=t.querySelector('[name="wcgwp_single_product_note"]');f&&(_.gift_product_id=f.value),v&&(_.gift_product_note=v.value.trim())}var y=t.querySelectorAll(".bundled_product"),m={};y.length&&y.forEach((function(e,t){var a=e.querySelector("div.cart");if(a){var n=a.getAttribute("data-product_id"),o=a.querySelector(".bundled_qty"),r=o?o.value:0;m[n]=r}}));var g=r?parseInt(r.value):0;a&&(o=d.value,c=u.value,s.forEach((function(e){var t=e.name,a=e.value;l[t]=a})));var p=document.querySelector(".cart-sidebar-content"),S=document.getElementsByClassName("shop-cart-count");if(r.classList.contains("ajax-ready")){e.classList.add("loading"),i&&(i.value=+i.value+ +r.value),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var w={action:"single_add_to_cart",ajax_nonce:woostify_ajax_single_add_to_cart_data.ajax_nonce,product_id:o,product_qty:g,variation_id:c,variations:JSON.stringify(l),gift_wrap_data:JSON.stringify(_),product_bundle_data:JSON.stringify(m)};w=new URLSearchParams(w).toString();var h=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:w,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(h).then((function(e){if(200!==e.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+e.status),e;return e.json()})).then((function(t){if(t.success){var a=t.data;if(S.length)for(var n=0,o=S.length;n<o;n++)S[n].innerHTML=a.item;if(p&&(p.innerHTML=a.content),e.classList.contains("woostify-buy-now")){var r=e.getAttribute("data-checkout_url");window.location=r}var i=document.querySelector(".woostify-total-price");i&&(i.innerHTML=a.total)}})).catch((function(e){console.log(e)})).finally((function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),e.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open"),jQuery(document.body).trigger("added_to_cart")}))}}))}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));